# MSA (Micro Service Architecture)
> * 대규모 애플리케이션을 작은 독립적인 서비스로 나누어 개발하고 운영하기 때문에, 개발과 배포의 유연성을 높인다.
> * 각 서비스는 독립적으로 배포되고 동작하기 때문에, 하나의 서비스에 문제가 발생해도 전체 시스템에 영향을 미치지 않아 안정성을 높인다.

## MSA 설계 핵심 원칙
> * 배포 단위를 최대한 작게 나눠야 한다.
> * 독립적으로 배포되고 동작하며 독립적인 데이터 베이스를 가져야 한다.
> * 통신은 가급적 비동기적으로 이루어져야 한다.

## 도메인 배포 단위 분리 

> ### 주문 요청

- 주문
  1. 상품 재고 및 쿠폰 검증
  2. 주문 생성 및 저장
  3. 주문 생성 성공 이벤트 발행

- 상품
  1. 주문 생성 이벤트 수신
  2. 상품 재고 차감 
  3. 상품 재고 차감 성공 이벤트 발행

- 쿠폰
  1. 상품 재고 차감 성공 이벤트 수신
  2. 쿠폰 사용 처리
  3. 쿠폰 사용 성공 이벤트 발행


> ### 결제 요청

- 포인트
    1. 포인트 검증 및 차감
    2. 포인트 차감 성공 이벤트 발행

- 결제
    1. 포인트 차감 성공 이벤트 수신 시
    2. 결제 정보 저장 및 결제 완료 처리
    3. 결제 완료 이벤트 발행

- 주문
  1. 결제 완료 이벤트 수신
  2. 주문 정보 변경 (주문 성공)
 

  

